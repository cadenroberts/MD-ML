## CGSchNet Scripts
### `preprocess.py`
This script generates the embeddings, prior forcefield, and delta forces necessary to train the network. The expected input is a directory files generated by
[batch_generate.py](https://github.com/razvanmarinescu/md/blob/master/daniel_s/notebooks/batch_generate.py) or and equivalent format.

Usage:
```./preprocess.py <INPUT_PATH> <OUTPUT_PATH>```

The `--pdbids <id1> <id2> ...` option can be used to prepare only a subset of the input directory. See `--help` for other options.

### `train.py`

Train a model on the output of `preprocess.py`. If a checkpoint already exists in `[OUTPUT_PATH]` training will be resumed from that checkpoint, and if no output directory is specified one will be auto generated in `../data/`.
Usage:
```./train.py <PREPROCESSED_PATH> [OUTPUT_PATH] --epochs <total_epochs> --batch <batch_size>```
By default the script will use all available GPUs to train. To use only a subset you can specify their CUDA IDs with the  `--gpus` option.

### `simulate.py`
Simulate a protein using a trained model:
```./simulate.py <CHECKPOINT_PATH> <PROCESSED_PATH> --steps <steps_to_run>```
Where `CHECKPOINT_PATH` is the path the trained checkpoint.pth file, and `PROCESSED_PATH` is the path to the specific processed protein you want to run. The generated trajectory will be saved to `sim.pdb` in the directory where the script is run.

### benchmark

When changing input data clear the cache at `/media/DATA_18_TB_1/andy/benchmark_cache`

#### example
```bash
./gen_benchmark.py /media/DATA_18_TB_1/andy/models/benchmark_trained_trp-cage_higher_learning_rate/result-2024.11.06-18.50.45
```

then

```bash
./gen_report ./benchmark.json
```