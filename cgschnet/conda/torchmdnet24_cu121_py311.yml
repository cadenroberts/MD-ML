name: torchmdnet24_cu121_py311
channels:
  - conda-forge
  - pytorch
  - nvidia
  - acellera        # For moleculekit
dependencies:
  - mdtraj
  - moleculekit
  - pip
  - cuda-version=12.1 # To make torchmd-net happy
  - python=3.11
  - pytorch-cuda
  - pytorch=2.4.1
  - seaborn
  - scikit-learn
  - ipykernel
  - torchmd=1.0.2
  - torchmd-net=2.4.0
  - cuda-nvcc
  - jax             # For force aggregation (Kramer 2023)
  - jaxlib==0.4.23  # For force aggregation (Kramer 2023)
  - transformers    # For ProtTrans (Elnaggar 2022)
  - sentencepiece   # For ProtTrans (Elnaggar 2022)
  - ipykernel       # For vscode
  - plotly          # For analysis
  - ipywidgets      # For analysis
  - nbformat        # For analysis
  - nglview=3.0.8   # For analysis
  - pip:
    - git+https://github.com/noegroup/aggforce.git@39ffb14f0a9a682e167af4b7d1cfb138afe3e1ca # For force aggregation (Kramer 2023)
    - triton==3.1.0 # For torch.compile (currently triton-3.* is only available via pip)

python cgschnet/scripts/train.py /work/hdd/bbpa/kbachelor/data/all_prots_aa /work/hdd/bbpa/kbachelor/models/bad_majewski --epochs=100 --batch=8 --subsetpdbs=/work/hdd/bbpa/kbachelor/homeodomain_chignolin_trpcage10percent.txt --gpus=0,1,2,3 --apc=140000 --config=cgschnet/configs/config_john.yaml --wd=0 --lr=0.002 --exp-lr=0.90 --checkpoint-save=1 --mini-epoch=75